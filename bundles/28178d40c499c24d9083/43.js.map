{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useSuggestion.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/usePlainTextListeners.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/PlainTextComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useComposerFunctions.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/usePlainTextInitialization.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/Emoji.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/SendWysiwygComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygSendActionHandler.ts"],"names":["useSuggestion","editorRef","setText","_suggestionData$mappe","suggestionData","setSuggestionData","useState","suggestion","mappedSuggestion","handleCommand","replacementText","_document$getSelectio2","node","newContent","textContent","document","getSelection","setBaseAndExtent","length","processCommand","handleMention","href","displayName","attributes","processMention","handleAtRoomMention","onSelect","_selection$anchorNode","selection","current","isCollapsed","anchorNode","nodeName","currentNode","anchorOffset","currentOffset","firstTextNode","createNodeIterator","NodeFilter","SHOW_TEXT","nextNode","isFirstTextNode","foundSuggestion","text","offset","startSliceIndex","endSliceIndex","shouldDecrementStartIndex","shouldIncrementEndIndex","wordAtCursor","slice","firstChar","charAt","restOfString","keyChar","type","getMappedSuggestion","startOffset","endOffset","findSuggestionInText","processSelectionChange","_node$textContent","_node$textContent$sli","_node$textContent2","_document$getSelectio","linkElement","createElement","linkTextNode","createTextNode","setAttribute","attr","value","entries","appendChild","leadingTextNode","trailingTextNode","parentNode","isNotNull","insertBefore","removeChild","index","test","amendInnerHtml","replace","usePlainTextListeners","initialContent","onChange","onSend","eventRelation","roomContext","useRoomContext","mxClient","useMatrixClientContext","ref","useRef","autocompleteRef","content","setContent","send","useCallback","innerHTML","isNotUndefined","amendedContent","enterShouldSend","useSettingValue","onInput","event","target","HTMLDivElement","newInnerHTML","onPaste","nativeEvent","imagePasteWasHandled","isEventToHandleAsClipboardEvent","data","ClipboardEvent","clipboardData","dataTransfer","handleClipboardEvent","preventDefault","onKeyDown","handleEventWithAutocomplete","key","Key","ENTER","sendModifierIsPressed","IS_MAC","metaKey","ctrlKey","shiftKey","stopPropagation","onBeforeInput","PlainTextComposer","_ref","className","disabled","children","placeholder","leftComponent","rightComponent","composerFunctions","useMemo","clear","insertText","focusOffset","setSelection","firstChild","focusNode","isForward","useComposerFunctions","arguments","undefined","useEffect","innerText","usePlainTextInitialization","useSetCursorPosition","isFocused","onFocus","useIsFocused","computedPlaceholder","React","classNames","onBlur","WysiwygAutocomplete","Editor","Emoji","menuPosition","EmojiButton","addEmoji","emoji","dis","dispatch","action","Action","ComposerInsert","timelineRenderingType","Content","forwardRef","composerElement","composerContext","useComposerContext","timeoutId","handler","payload","_payload$context","context","TimelineRenderingType","Room","FocusAComposer","FocusSendMessageComposer","focusComposer","ClearAndFocusSendMessageComposer","composerType","ComposerType","Send","userId","then","useDispatcher","defaultDispatcher","useWysiwygSendActionHandler","SendWysiwygComposer","_ref2","isRichTextEnabled","e2eStatus","props","_objectWithoutProperties","_excluded","Composer","WysiwygComposer","defaultContextValue","getDefaultContextValue","ComposerContext","Provider","_extends","E2EIcon","status"],"mappings":"mVAmDO,SAASA,EACZC,EACAC,GAOF,IAAAC,EACE,MAAOC,EAAgBC,GAAqBC,mBAA0B,MAetE,MAAO,CACHC,WAA4C,QAAlCJ,EAAEC,aAAc,EAAdA,EAAgBI,wBAAgB,IAAAL,IAAI,KAChDM,cALmBC,GAmIpB,SACHA,EACAN,EACAC,EACAH,GACI,IAAAS,EAEJ,GAAuB,OAAnBP,EACA,OAGJ,MAAM,KAAEQ,GAASR,EAIXS,EAAc,GAAEH,KACtBE,EAAKE,YAAcD,EAII,QAAvBF,EAAAI,SAASC,sBAAc,IAAAL,GAAvBA,EAAyBM,iBAAiBL,EAAMC,EAAWK,OAAQN,EAAMC,EAAWK,QACpFhB,EAAQW,GACRR,EAAkB,KACtB,CAzJQc,CAAeT,EAAiBN,EAAgBC,EAAmBH,GAKnEkB,cAZkBA,CAACC,EAAcC,EAAqBC,IACtDC,EAAeH,EAAMC,EAAaC,EAAYnB,EAAgBC,EAAmBH,GAYjFuB,oBAVyBF,GACzBC,EAAe,IAAK,QAASD,EAAYnB,EAAgBC,EAAmBH,GAU5EwB,SAhBaA,IA2Bd,SACHzB,EACAI,GACI,IAAAsB,EACJ,MAAMC,EAAYb,SAASC,eAG3B,GAC0B,OAAtBf,EAAU4B,SACI,OAAdD,IACCA,EAAUE,aACwB,WAAf,QAApBH,EAAAC,EAAUG,kBAAU,IAAAJ,OAAA,EAApBA,EAAsBK,UAGtB,YADA3B,EAAkB,MAKtB,MAAQ0B,WAAYE,EAAaC,aAAcC,GAAkBP,EAGjE,GAAgC,OAA5BK,EAAYnB,YAEZ,YADAT,EAAkB,MAItB,MAAM+B,EAAgBrB,SAASsB,mBAAmBpC,EAAU4B,QAASS,WAAWC,WAAWC,WACrFC,EAAkBR,IAAgBG,EAClCM,EAwHH,SACHC,EACAC,EACAH,GAGA,GAAIG,EAAS,GAAKA,EAASD,EAAKzB,OAC5B,OAAO,KAKX,IAAI2B,EAAkBD,EAClBE,EAAgBF,EAIpB,KAAOG,EAA0BJ,EAAME,IACnCA,IAKJ,KAAOG,EAAwBL,EAAMG,IACjCA,IAIJ,MAAMG,EAAeN,EAAKO,MAAML,EAAiBC,GAC3CtC,EA4DH,SAA6BmC,GAChC,MAAMQ,EAAYR,EAAKS,OAAO,GACxBC,EAAeV,EAAKO,MAAM,GAEhC,OAAQC,GACJ,IAAK,IACD,MAAO,CAAEG,QAASH,EAAWR,KAAMU,EAAcE,KAAM,WAC3D,IAAK,IACL,IAAK,IACD,MAAO,CAAED,QAASH,EAAWR,KAAMU,EAAcE,KAAM,WAC3D,QACI,OAAO,KAEnB,CAzE6BC,CAAoBP,GAU7C,GACyB,OAArBzC,GAC2B,YAA1BA,EAAiB+C,QACZd,GAAuC,IAApBI,GAAyBC,IAAkBH,EAAKzB,QAEzE,OAAO,KAGX,MAAO,CAAEV,mBAAkBiD,YAAaZ,EAAiBa,UAAWb,EAAkBI,EAAa/B,OACvG,CAxK4ByC,CAAqB1B,EAAYnB,YAAaqB,EAAeM,GAGrF,GAAwB,OAApBC,EAEA,YADArC,EAAkB,MAItBA,EAAkB,CACdG,iBAAkBkC,EAAgBlC,iBAClCI,KAAMqB,EACNwB,YAAaf,EAAgBe,YAC7BC,UAAWhB,EAAgBgB,WAEnC,CArEiCE,CAAuB3D,EAAWI,GAkBnE,CAgEO,SAASmB,EACZH,EACAC,EACAC,EACAnB,EACAC,EACAH,GACI,IAAA2D,EAAAC,EAAAC,EAAAC,EAEJ,GAAuB,OAAnB5D,EACA,OAGJ,MAAM,KAAEQ,GAASR,EAGX6D,EAAclD,SAASmD,cAAc,KACrCC,EAAepD,SAASqD,eAAe9C,GAC7C2C,EAAYI,aAAa,OAAQhD,GACjC4C,EAAYI,aAAa,kBAAmB,SAE5C,IAAK,MAAOC,EAAMC,KAAUhD,EAAWiD,UACnCP,EAAYI,aAAaC,EAAMC,GAGnCN,EAAYQ,YAAYN,GAGxB,MAAMO,EAAkB3D,SAASqD,gBAA+B,QAAhBP,EAAAjD,EAAKE,mBAAW,IAAA+C,OAAA,EAAhBA,EAAkBX,MAAM,EAAG9C,EAAeqD,eAAgB,KACpGkB,EAAmB5D,SAASqD,eAAgB,IAAoD,QAAnDN,EAAkB,QAAlBC,EAAEnD,EAAKE,mBAAW,IAAAiD,OAAA,EAAhBA,EAAkBb,MAAM9C,EAAesD,kBAAU,IAAAI,IAAI,MAGpGc,EAAahE,EAAKgE,WACpBC,YAAUD,KACVA,EAAWE,aAAaJ,EAAiB9D,GACzCgE,EAAWE,aAAab,EAAarD,GACrCgE,EAAWE,aAAaH,EAAkB/D,GAC1CgE,EAAWG,YAAYnE,IAIJ,QAAvBoD,EAAAjD,SAASC,sBAAc,IAAAgD,GAAvBA,EAAyB/C,iBAAiB0D,EAAkB,EAAGA,EAAkB,GAGjFzE,IACAG,EAAkB,KACtB,CAyGA,SAAS0C,EAA0BJ,EAAcqC,GAE7C,QAAIA,GAAS,KAIL,KAAKC,KAAKtC,EAAKqC,EAAQ,GACnC,CAUA,SAAShC,EAAwBL,EAAcqC,GAE3C,QAAIA,GAASrC,EAAKzB,UAGV,KAAK+D,KAAKtC,EAAKqC,GAC3B,C,YC7RA,SAASE,EAAevC,GACpB,OAAOA,EACFwC,QAAQ,oBAAqB,MAC7BA,QAAQ,SAAU,MAClBA,QAAQ,WAAY,GAC7B,CAmBO,SAASC,EACZC,EACAC,EACAC,EACAC,GAgBA,MAAMC,EAAcC,cACdC,EAAWC,cAEXC,EAAMC,iBAA8B,MACpCC,EAAkBD,iBAA4B,OAC7CE,EAASC,GAAc3F,mBAA6B+E,GAErDa,EAAOC,uBAAY,KACjBN,EAAIhE,UACJgE,EAAIhE,QAAQuE,UAAY,IAE5Bb,YAAU,GACX,CAACM,EAAKN,IAEHrF,EAAUiG,uBACXxD,IACG,GAAI0D,YAAe1D,GACfsD,EAAWtD,GACX2C,WAAW3C,QACR,GAAIkC,YAAUgB,IAAQhB,YAAUgB,EAAIhE,SAAU,CAEjD,MACMyE,EAAiBpB,EADGW,EAAIhE,QAAQuE,WAEtCH,EAAWK,GACXhB,WAAWgB,EACf,IAEJ,CAAChB,EAAUO,KAMT,WAAEtF,EAAU,SAAEmB,EAAQ,cAAEjB,EAAa,cAAEW,EAAa,oBAAEK,GAAwBzB,EAAc6F,EAAK3F,GAEjGqG,GAAmBC,YAAyB,wCAC5CC,EAAUN,uBACXO,IACG,GAAiBA,EAAMC,kBAxFNC,eAwFe,CAE5B,MAAMC,EAAeN,EAAkBG,EAAMC,OAAOP,UAAYlB,EAAewB,EAAMC,OAAOP,WAC5FlG,EAAQ2G,EACZ,IAEJ,CAAC3G,EAASqG,IAGRO,EAAUX,uBACXO,IACG,MAAM,YAAEK,GAAgBL,EACxB,IAAIM,GAAuB,EAE3B,GAAIC,YAAgCF,GAAc,CAC9C,MAAMG,EACFH,aAAuBI,eAAiBJ,EAAYK,cAAgBL,EAAYM,aACpFL,EAAuBM,YAAqBP,EAAaG,EAAMzB,EAAaE,EAAUH,EAC1F,CAGIwB,EACAN,EAAMa,iBAENd,EAAQC,EACZ,GAEJ,CAAClB,EAAeG,EAAUc,EAAShB,IAGjC+B,EAAYrB,uBACbO,IAGG,IADgCe,YAA4B1B,EAAiBW,IAMzEA,EAAMgB,MAAQC,IAAIC,MAAO,CAEzB,MAAMC,EAAwBC,IAASpB,EAAMqB,QAAUrB,EAAMsB,QAGzDzB,IAAoBG,EAAMuB,WAC1BvB,EAAMa,iBACNb,EAAMwB,kBACNhC,MAICK,GAAmBsB,IACpBnB,EAAMa,iBACNb,EAAMwB,kBACNhC,IAER,IAEJ,CAACH,EAAiBQ,EAAiBL,IAGvC,MAAO,CACHL,MACAE,kBACAoC,cAAerB,EACfL,UACAK,UACAU,YACAxB,UACAC,WAAY/F,EACZK,aACAmB,WACAjB,gBACAW,gBACAK,sBAER,C,kCCxJO,SAAS2G,EAAiBC,GAWO,IAXN,UAC9BC,EAAS,SACTC,GAAW,EAAK,OAChBhD,EAAM,SACND,EAAQ,SACRkD,EAAQ,YACRC,EAAW,eACXpD,EAAc,cACdqD,EAAa,eACbC,EAAc,cACdnD,GACqB6C,EACrB,MACIxC,IAAK5F,EAAS,gBACd8F,EAAe,cACfoC,EAAa,QACb1B,EAAO,QACPK,EAAO,UACPU,EAAS,QACTxB,EAAO,WACPC,EAAU,WACV1F,EAAU,SACVmB,EAAQ,cACRjB,EAAa,cACbW,EAAa,oBACbK,GACA2D,EAAsBC,EAAgBC,EAAUC,EAAQC,GAEtDoD,EClDH,SACH/C,EACAI,GAKA,OAAO4C,mBACH,KAAM,CACFC,MAAOA,KACCjD,EAAIhE,UACJgE,EAAIhE,QAAQuE,UAAY,GAC5B,EAEJ2C,WAAapG,IACT,MAAMf,EAAYb,SAASC,eAE3B,GAAI6E,EAAIhE,SAAWD,EAAW,CAC1B,MAAMoE,EAAUH,EAAIhE,QAAQuE,WACtB,aAAElE,EAAY,YAAE8G,GAAgBpH,EACtCiE,EAAIhE,QAAQuE,UAAa,GAAEJ,EAAQ9C,MAAM,EAAGhB,KAAgBS,IAAOqD,EAAQ9C,MAAM8F,KACjFC,YAAa,CACTlH,WAAY8D,EAAIhE,QAAQqH,WACxBhH,aAAcA,EAAeS,EAAKzB,OAClCiI,UAAWtD,EAAIhE,QAAQqH,WACvBF,YAAaA,EAAcrG,EAAKzB,OAChCkI,WAAW,IAEfnD,EAAWJ,EAAIhE,QAAQuE,UAC3B,MAGR,CAACP,EAAKI,GAEd,CDgB8BoD,CAAqBpJ,EAAWgG,IEpDvD,WAA4F,IAAxDZ,EAAciE,UAAApI,OAAA,QAAAqI,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAAIzD,EAA2ByD,UAAApI,OAAA,EAAAoI,UAAA,QAAAC,EACvFC,qBAAU,KACF3D,EAAIhE,UACJgE,EAAIhE,QAAQ4H,UAAYpE,EAC5B,GACD,CAACQ,EAAKR,GACb,CF+CIqE,CAA2BrE,EAAgBpF,GAC3C0J,YAAqBpB,EAAUtI,GAC/B,MAAM,UAAE2J,EAAS,QAAEC,GAAYC,cACzBC,GAAwB/D,GAAWyC,QAAgBc,EAEzD,OACIS,IAAA9F,cAAA,OACI,cAAY,oBACZoE,UAAW2B,IAAW3B,EAAW,CAAE,CAAE,GAAEA,aAAsBsB,IAC7DC,QAASA,EACTK,OAAQL,EACR1B,cAAeA,EACf1B,QAASA,EACTK,QAASA,EACTU,UAAWA,EACX9F,SAAUA,GAEVsI,IAAA9F,cAACiG,IAAmB,CAChBtE,IAAKE,EACLxF,WAAYA,EACZa,cAAeA,EACfX,cAAeA,EACfgB,oBAAqBA,IAEzBuI,IAAA9F,cAACkG,IAAM,CACHvE,IAAK5F,EACLsI,SAAUA,EACVG,cAAeA,EACfC,eAAgBA,EAChBF,YAAasB,IAEhBvB,aAAQ,EAARA,EAAWvI,EAAW2I,GAGnC,C,uBG5EO,SAASyB,EAAKhC,GAA4C,IAA3C,aAAEiC,GAA0BjC,EAC9C,MAAM5C,EAAcC,cAEpB,OACIsE,IAAA9F,cAACqG,IAAW,CACRD,aAAcA,EACdE,SAAWC,IACPC,IAAIC,SAAgC,CAChCC,OAAQC,IAAOC,eACfnI,KAAM8H,EACNM,sBAAuBtF,EAAYsF,yBAEhC,IAIvB,C,yDCXMC,EAAUC,sBAAsC,SAAgB5C,EAElE4C,GACF,IAFE,SAAE1C,GAAW,EAAK,kBAAEK,GAAiCP,EAIrD,OCVG,SACHE,EACA2C,EACAtC,GAEA,MAAMnD,EAAcC,cACdyF,EAAkBC,cAClBC,EAAYvF,iBAAsB,MAElCwF,EAAUnF,uBACXoF,IAA2B,IAAAC,EAGxB,GAAIjD,GAAa2C,YAAiBrJ,QAAS,OAE3C,MAAM4J,EAAyB,QAAlBD,EAAGD,EAAQE,eAAO,IAAAD,IAAIE,IAAsBC,KAEzD,OAAQJ,EAAQX,QACZ,IAAK,iBACL,KAAKC,IAAOe,eACZ,KAAKf,IAAOgB,yBACRC,YAAcZ,EAAiBO,EAAShG,EAAa4F,GACrD,MACJ,KAAKR,IAAOkB,iCAER,GAAIR,EAAQR,wBAA0BtF,EAAYsF,sBAAuB,MAEzEnC,EAAkBE,QAClBgD,YAAcZ,EAAiBO,EAAShG,EAAa4F,GACrD,MACJ,KAAKR,IAAOC,eACR,GAAIS,EAAQR,wBAA0BtF,EAAYsF,sBAAuB,MACzE,GAAIQ,EAAQS,eAAiBC,IAAaC,KAAM,MAE5CX,EAAQY,QAEDZ,EAAQ7E,OAER6E,EAAQ5I,MACfsG,YAAakC,EAAgBvJ,WAAWwK,MAAK,IAAMxD,EAAkBG,WAAWwC,EAAQ5I,QAGpG,GAEJ,CAAC4F,EAAU2C,EAAiBzF,EAAamD,EAAmBuC,IAGhEkB,YAAcC,IAAmBhB,EACrC,CDvCIiB,CAA4BhE,EAAU0C,EAA6CrC,GAC5E,IACX,IAee,SAAS4D,EAAmBC,GAKD,IALE,kBACxCC,EAAiB,UACjBC,EAAS,aACTrC,GAEuBmC,EADpBG,EAAKC,IAAAJ,EAAAK,GAER,MAAMC,EAAWL,EAAoBM,IAAkB5E,EACjD6E,EAAsBnH,iBAAOoH,YAAuB,CAAE1H,cAAeoH,EAAMpH,iBAEjF,OACIwE,IAAA9F,cAACiJ,IAAgBC,SAAQ,CAAC7I,MAAO0I,EAAoBpL,SACjDmI,IAAA9F,cAAC6I,EAAQM,IAAA,CACL/E,UAAU,yBACVI,cAAeiE,GAAa3C,IAAA9F,cAACoJ,IAAO,CAACC,OAAQZ,IAC7ChE,eAAgBqB,IAAA9F,cAACmG,EAAK,CAACC,aAAcA,KACjCsC,IAEH,CAAC/G,EAAK+C,IACHoB,IAAA9F,cAAC8G,EAAO,CAACzC,SAAUqE,EAAMrE,SAAU1C,IAAKA,EAAK+C,kBAAmBA,MAKpF,C","file":"bundles/28178d40c499c24d9083/43.js","sourceRoot":""}